{"ast":null,"code":"import React,{useState,useEffect}from'react';import AdminLayout from'../../components/AdminLayout';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AdminOrders=()=>{const[orders,setOrders]=useState([]);const[loading,setLoading]=useState(true);useEffect(()=>{fetchOrders();},[]);const fetchOrders=async()=>{try{const response=await axios.get('/api/orders/admin');setOrders(response.data);}catch(error){console.error('Error fetching orders:',error);}finally{setLoading(false);}};const updateOrderStatus=async(orderId,newStatus)=>{try{await axios.put(`/api/orders/${orderId}/status`,{status:newStatus});alert('C·∫≠p nh·∫≠t tr·∫°ng th√°i th√†nh c√¥ng!');fetchOrders();}catch(error){console.error('Error updating order status:',error);alert('C√≥ l·ªói x·∫£y ra!');}};const getStatusBadgeClass=status=>{switch(status){case'pending':return'bg-warning';case'confirmed':return'bg-info';case'shipped':return'bg-primary';case'delivered':return'bg-success';case'cancelled':return'bg-danger';default:return'bg-secondary';}};const getStatusText=status=>{switch(status){case'pending':return'Ch·ªù x√°c nh·∫≠n';case'confirmed':return'ƒê√£ x√°c nh·∫≠n';case'shipped':return'ƒêang giao';case'delivered':return'ƒê√£ giao';case'cancelled':return'ƒê√£ h·ªßy';default:return status;}};return/*#__PURE__*/_jsxs(AdminLayout,{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"mb-4\",children:\"\\uD83D\\uDED2 Qu\\u1EA3n l\\xFD \\u0111\\u01A1n h\\xE0ng\"}),loading?/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-5\",children:/*#__PURE__*/_jsx(\"div\",{className:\"spinner-border text-primary\",role:\"status\",children:/*#__PURE__*/_jsx(\"span\",{className:\"visually-hidden\",children:\"Loading...\"})})}):/*#__PURE__*/_jsx(\"div\",{className:\"admin-table\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Kh\\xE1ch h\\xE0ng\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Email\"}),/*#__PURE__*/_jsx(\"th\",{children:\"S\\u1EA3n ph\\u1EA9m\"}),/*#__PURE__*/_jsx(\"th\",{children:\"T\\u1ED5ng ti\\u1EC1n\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Tr\\u1EA1ng th\\xE1i\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Ng\\xE0y \\u0111\\u1EB7t\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Thao t\\xE1c\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:orders.map(order=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsxs(\"td\",{children:[\"#\",order.id]}),/*#__PURE__*/_jsx(\"td\",{children:order.user_name}),/*#__PURE__*/_jsx(\"td\",{children:order.user_email}),/*#__PURE__*/_jsx(\"td\",{children:order.items}),/*#__PURE__*/_jsx(\"td\",{children:new Intl.NumberFormat('vi-VN',{style:'currency',currency:'VND'}).format(order.total_amount)}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"span\",{className:`badge ${getStatusBadgeClass(order.status)}`,children:getStatusText(order.status)})}),/*#__PURE__*/_jsx(\"td\",{children:new Date(order.created_at).toLocaleDateString('vi-VN')}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"dropdown\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-sm btn-outline-primary dropdown-toggle\",type:\"button\",\"data-bs-toggle\":\"dropdown\",children:\"C\\u1EADp nh\\u1EADt\"}),/*#__PURE__*/_jsxs(\"ul\",{className:\"dropdown-menu\",children:[/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"dropdown-item\",onClick:()=>updateOrderStatus(order.id,'confirmed'),disabled:order.status!=='pending',children:\"X\\xE1c nh\\u1EADn\"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"dropdown-item\",onClick:()=>updateOrderStatus(order.id,'shipped'),disabled:order.status!=='confirmed',children:\"\\u0110ang giao\"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"dropdown-item\",onClick:()=>updateOrderStatus(order.id,'delivered'),disabled:order.status!=='shipped',children:\"\\u0110\\xE3 giao\"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"hr\",{className:\"dropdown-divider\"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"dropdown-item text-danger\",onClick:()=>updateOrderStatus(order.id,'cancelled'),disabled:order.status==='delivered'||order.status==='cancelled',children:\"H\\u1EE7y \\u0111\\u01A1n\"})})]})]})})]},order.id))})]})})]});};export default AdminOrders;","map":{"version":3,"names":["React","useState","useEffect","AdminLayout","axios","jsx","_jsx","jsxs","_jsxs","AdminOrders","orders","setOrders","loading","setLoading","fetchOrders","response","get","data","error","console","updateOrderStatus","orderId","newStatus","put","status","alert","getStatusBadgeClass","getStatusText","children","className","role","map","order","id","user_name","user_email","items","Intl","NumberFormat","style","currency","format","total_amount","Date","created_at","toLocaleDateString","type","onClick","disabled"],"sources":["D:/ThucTapDN/badminton_shop/frontend/src/pages/admin/AdminOrders.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport AdminLayout from '../../components/AdminLayout';\r\nimport axios from 'axios';\r\n\r\nconst AdminOrders = () => {\r\n  const [orders, setOrders] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    fetchOrders();\r\n  }, []);\r\n\r\n  const fetchOrders = async () => {\r\n    try {\r\n      const response = await axios.get('/api/orders/admin');\r\n      setOrders(response.data);\r\n    } catch (error) {\r\n      console.error('Error fetching orders:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const updateOrderStatus = async (orderId, newStatus) => {\r\n    try {\r\n      await axios.put(`/api/orders/${orderId}/status`, { status: newStatus });\r\n      alert('C·∫≠p nh·∫≠t tr·∫°ng th√°i th√†nh c√¥ng!');\r\n      fetchOrders();\r\n    } catch (error) {\r\n      console.error('Error updating order status:', error);\r\n      alert('C√≥ l·ªói x·∫£y ra!');\r\n    }\r\n  };\r\n\r\n  const getStatusBadgeClass = (status) => {\r\n    switch (status) {\r\n      case 'pending': return 'bg-warning';\r\n      case 'confirmed': return 'bg-info';\r\n      case 'shipped': return 'bg-primary';\r\n      case 'delivered': return 'bg-success';\r\n      case 'cancelled': return 'bg-danger';\r\n      default: return 'bg-secondary';\r\n    }\r\n  };\r\n\r\n  const getStatusText = (status) => {\r\n    switch (status) {\r\n      case 'pending': return 'Ch·ªù x√°c nh·∫≠n';\r\n      case 'confirmed': return 'ƒê√£ x√°c nh·∫≠n';\r\n      case 'shipped': return 'ƒêang giao';\r\n      case 'delivered': return 'ƒê√£ giao';\r\n      case 'cancelled': return 'ƒê√£ h·ªßy';\r\n      default: return status;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <AdminLayout>\r\n      <h2 className=\"mb-4\">üõí Qu·∫£n l√Ω ƒë∆°n h√†ng</h2>\r\n\r\n      {loading ? (\r\n        <div className=\"text-center py-5\">\r\n          <div className=\"spinner-border text-primary\" role=\"status\">\r\n            <span className=\"visually-hidden\">Loading...</span>\r\n          </div>\r\n        </div>\r\n      ) : (\r\n        <div className=\"admin-table\">\r\n          <table className=\"table\">\r\n            <thead>\r\n              <tr>\r\n                <th>ID</th>\r\n                <th>Kh√°ch h√†ng</th>\r\n                <th>Email</th>\r\n                <th>S·∫£n ph·∫©m</th>\r\n                <th>T·ªïng ti·ªÅn</th>\r\n                <th>Tr·∫°ng th√°i</th>\r\n                <th>Ng√†y ƒë·∫∑t</th>\r\n                <th>Thao t√°c</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {orders.map(order => (\r\n                <tr key={order.id}>\r\n                  <td>#{order.id}</td>\r\n                  <td>{order.user_name}</td>\r\n                  <td>{order.user_email}</td>\r\n                  <td>{order.items}</td>\r\n                  <td>\r\n                    {new Intl.NumberFormat('vi-VN', { \r\n                      style: 'currency', \r\n                      currency: 'VND' \r\n                    }).format(order.total_amount)}\r\n                  </td>\r\n                  <td>\r\n                    <span className={`badge ${getStatusBadgeClass(order.status)}`}>\r\n                      {getStatusText(order.status)}\r\n                    </span>\r\n                  </td>\r\n                  <td>\r\n                    {new Date(order.created_at).toLocaleDateString('vi-VN')}\r\n                  </td>\r\n                  <td>\r\n                    <div className=\"dropdown\">\r\n                      <button \r\n                        className=\"btn btn-sm btn-outline-primary dropdown-toggle\" \r\n                        type=\"button\" \r\n                        data-bs-toggle=\"dropdown\"\r\n                      >\r\n                        C·∫≠p nh·∫≠t\r\n                      </button>\r\n                      <ul className=\"dropdown-menu\">\r\n                        <li>\r\n                          <button \r\n                            className=\"dropdown-item\"\r\n                            onClick={() => updateOrderStatus(order.id, 'confirmed')}\r\n                            disabled={order.status !== 'pending'}\r\n                          >\r\n                            X√°c nh·∫≠n\r\n                          </button>\r\n                        </li>\r\n                        <li>\r\n                          <button \r\n                            className=\"dropdown-item\"\r\n                            onClick={() => updateOrderStatus(order.id, 'shipped')}\r\n                            disabled={order.status !== 'confirmed'}\r\n                          >\r\n                            ƒêang giao\r\n                          </button>\r\n                        </li>\r\n                        <li>\r\n                          <button \r\n                            className=\"dropdown-item\"\r\n                            onClick={() => updateOrderStatus(order.id, 'delivered')}\r\n                            disabled={order.status !== 'shipped'}\r\n                          >\r\n                            ƒê√£ giao\r\n                          </button>\r\n                        </li>\r\n                        <li><hr className=\"dropdown-divider\" /></li>\r\n                        <li>\r\n                          <button \r\n                            className=\"dropdown-item text-danger\"\r\n                            onClick={() => updateOrderStatus(order.id, 'cancelled')}\r\n                            disabled={order.status === 'delivered' || order.status === 'cancelled'}\r\n                          >\r\n                            H·ªßy ƒë∆°n\r\n                          </button>\r\n                        </li>\r\n                      </ul>\r\n                    </div>\r\n                  </td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      )}\r\n    </AdminLayout>\r\n  );\r\n};\r\n\r\nexport default AdminOrders;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}